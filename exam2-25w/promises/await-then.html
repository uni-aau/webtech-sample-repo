<html>
  <body>
    <script>
      const fetchData = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            const success = true; // Simulate success or failure
            if (success) {
              resolve({ id: 1, name: "Alice" });
            } else {
              reject("Failed to fetch data");
            }
          }, 2000);
        });
      };

      // If you use await in function, you have to mark the function as async
      async function getData() {
        try {
          console.log("Fetching data...");

          const data = await fetchData(); // Waits until `fetchData` resolves, then the next statement will be executed
          console.log("Data received:", data);
        } catch (error) {
          console.log("Error:", error); // Catches any errors from `fetchData`
        }
      }

      // Async function without 'await'
      async function getDataWithoutAwait() {
        try {
          console.log("Fetching data without await...");
          
          const data = fetchData(); // fetchData is called but not awaited
          console.log(data); // Logs 'Promise { <pending> }' immediately
        } catch (err) {
          console.log("Error:", err);
        }
      }

      // Using promise chaining with .then/.catch
      async function getData() {
        console.log("Fetching data via promise...");

        fetchData() // Waits until `fetchData` resolves, then the first .then is triggered
          .then((returnValue) => console.log(returnValue))
          .catch((error) => console.error(error))
          .finally(() => console.log("always executed")); // always executed after promise finishes
      }

      // Returning awaited value
      async function returnAwaitedData() {
        try {
          return await fetchData(); // fetchData is called but not awaited
        } catch (err) {
          console.log("Error:", err);
        }
      }
      // getData(); // Output after 2 seconds: "Data received: <data>"
      // getDataWithoutAwait(); // Output immediately: "Promise { <pending> }" since the promise was not resolved before returning it
      // console.log(returnAwaitedData())
      // const value = await returnAwaitedData(); // not possible out of async methods
      getData();
      // returnAwaitedData().then((returnValue) => console.log(returnValue))
    </script>
  </body>
</html>
